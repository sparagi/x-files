test generation
generateAbnormalResolverTests
	"Test resolving abnormal relative URI references to absolute URIs."
	"self generateAbnormalResolverTests"
	| baseURIString testPairs |
	
	baseURIString := 'http://a/b/c/d;p?q'.
	testPairs := #(
		 ('../../../g'		'http://a/g')
		 ('../../../../g'	'http://a/g')
		 ('/./g'			'http://a/g')
		 ('/../g'			'http://a/g')
		 ('g.'			'http://a/b/c/g.')
		 ('.g'			'http://a/b/c/.g')
		 ('g..'			'http://a/b/c/g..')
		 ('..g'			'http://a/b/c/..g')
		 ('./../g'			'http://a/b/g')
		 ('./g/.'			'http://a/b/c/g/')
		 ('g/./h'			'http://a/b/c/g/h')
		 ('g/../h'		'http://a/b/c/h')
		 ('g;x=1/./y'		'http://a/b/c/g;x=1/y')
		 ('g;x=1/../y'	'http://a/b/c/y')
		 ('g?y/./x'		'http://a/b/c/g?y/./x')
		 ('g?y/../x'		'http://a/b/c/g?y/../x')
		 ('g#s/./x'		'http://a/b/c/g#s/./x')
		 ('g#s/../x'		'http://a/b/c/g#s/../x')
		 ('http:g'		'http:g') 	"for strict parsers"). 

	1 to: testPairs size do: [:testNumber | | testPair relativeURIString resolvedURIString testMethod |
			testPair := testPairs at: testNumber.
			relativeURIString := testPair first.
			resolvedURIString := testPair last.
			testMethod := String streamContents: [:stream | stream
				nextPutAll: 'test3986ResolveAbnormal'; nextPutAll: testNumber asString; cr;
				nextPutAll: '	"From section 5.4.2."'; cr;
				nextPutAll: '	"Automatically generated by class>>generateAbnormalResolverTests; do not edit here."'; cr;
				nextPutAll: '	| baseURI relativeURI resolvedURI |'; cr;
				cr;
				nextPutAll: '	baseURI := URI fromString: '''; nextPutAll: baseURIString; nextPutAll: '''.'; cr;
				nextPutAll: '	relativeURI := URI fromString: '''; nextPutAll: relativeURIString; nextPutAll: '''.'; cr;
				nextPutAll: '	resolvedURI := baseURI resolve: relativeURI.'; cr;
				cr;
				nextPutAll: '	self should: [resolvedURI asString = '''; nextPutAll: resolvedURIString; nextPutAll: ''']'].
			self compile: testMethod classified: 'examples']